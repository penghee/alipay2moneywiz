# 使用说明

## 快速开始

1. **启动应用**：
   ```bash
   cd app
   ./start.sh
   ```
   或者：
   ```bash
   cd app
   npm run dev
   ```

2. **访问应用**：
   打开浏览器访问 [http://localhost:3000](http://localhost:3000)

## 功能说明

### 首页
- 显示所有可用的年份
- 点击年份卡片查看年度统计
- **导入账单文件**：支持支付宝和微信账单导入

### 导入页面
- **文件上传**：支持拖拽和点击上传
- **平台选择**：支付宝（CSV）和微信（XLSX）
- **自动处理**：智能分类和账户映射
- **实时反馈**：显示导入结果和统计信息

### 年度统计页面
- **概览卡片**：显示总收入、总支出、结余
- **月度趋势图**：折线图显示每月收支情况
- **收支对比图**：柱状图对比每月收入和支出
- **月度详情**：点击月份查看详细统计

### 月度统计页面
- **概览卡片**：显示当月收入、支出、结余、交易笔数
- **分类分布饼图**：显示支出分类占比
- **分类金额柱状图**：显示各分类支出金额
- **分类明细表**：详细的分类统计表格

## 数据要求

### 目录结构
```
data/
├── 2025/
│   ├── 01.csv
│   ├── 02.csv
│   └── 07.csv
└── 2024/
    ├── 01.csv
    └── 02.csv
```

### CSV 文件格式
```csv
账户,转账,描述,交易对方,分类,日期,备注,标签,金额
招商信用卡2542,未知账户,退款-平安好车主预支付,,交通,2025-07-28,,,78.85
招商信用卡2542,,平安好车主预支付,,交通,2025-07-28,,,-80
```

### 字段说明
- **账户**：交易账户
- **转账**：转账类型
- **描述**：交易描述
- **交易对方**：交易对方
- **分类**：支出分类（用于统计）
- **日期**：交易日期
- **备注**：备注信息
- **标签**：标签
- **金额**：交易金额（正数为收入，负数为支出）

## 导入功能

### 支持的文件格式
- **支付宝**：CSV 格式的账单文件
- **微信**：XLSX 格式的账单文件

### 导入流程
1. 访问 `/import` 页面
2. 选择平台（支付宝或微信）
3. 上传对应的账单文件
4. 系统自动处理并存储到 data 目录
5. 查看导入结果和统计信息

### 自动处理功能
- **智能分类**：根据交易描述自动匹配分类
- **账户映射**：自动识别和映射账户信息
- **数据合并**：自动合并到月度汇总文件
- **格式统一**：统一数据格式和字段

## 注意事项

1. **文件命名**：月份文件应命名为 `01.csv`, `02.csv` 等
2. **数据格式**：金额字段应为数字格式
3. **分类统计**：只有支出（负数）会进行分类统计
4. **日期格式**：建议使用 YYYY-MM-DD 格式
5. **文件大小**：建议单个文件不超过 10MB

## 故障排除

### 常见问题

1. **无法加载数据**
   - 检查 `../data` 目录是否存在
   - 确认 CSV 文件格式正确
   - 查看浏览器控制台错误信息

2. **图表不显示**
   - 确认数据中有有效的分类和金额
   - 检查浏览器是否支持 JavaScript

3. **页面空白**
   - 检查网络连接
   - 尝试刷新页面
   - 查看终端错误信息

### 调试模式

启动时添加调试信息：
```bash
DEBUG=* npm run dev
```

## 技术特性

- ✅ 响应式设计，支持移动端
- ✅ 实时数据统计
- ✅ 交互式图表
- ✅ 中文界面
- ✅ 类型安全（TypeScript）
- ✅ 现代化 UI 设计
